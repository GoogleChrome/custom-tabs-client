{
  "comments": [
    {
      "key": {
        "uuid": "0e851554_95e2d9cf",
        "filename": "customtabs/src/android/support/customtabs/trusted/LauncherActivity.java",
        "patchSetId": 2
      },
      "lineNbr": 90,
      "author": {
        "id": 1116074
      },
      "writtenOn": "2018-11-26T19:34:17Z",
      "side": 1,
      "message": "do we need the new key or can we just check whether the instance state was saved at all?",
      "range": {
        "startLine": 90,
        "startChar": 42,
        "endLine": 90,
        "endChar": 60
      },
      "revId": "bbc320076eed760504875240bc1aea0be6b2dae8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "187f3e4b_ecde6dbb",
        "filename": "customtabs/src/android/support/customtabs/trusted/LauncherActivity.java",
        "patchSetId": 2
      },
      "lineNbr": 90,
      "author": {
        "id": 1297953
      },
      "writtenOn": "2018-11-26T21:29:18Z",
      "side": 1,
      "message": "There is an asynchoronous delay before the service get bound, so potentially there is a chance for the user to rotate the device before TWA is launched. This chance is very slim of course, but why risk it.",
      "parentUuid": "0e851554_95e2d9cf",
      "range": {
        "startLine": 90,
        "startChar": 42,
        "endLine": 90,
        "endChar": 60
      },
      "revId": "bbc320076eed760504875240bc1aea0be6b2dae8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "65a10a3d_a76d4414",
        "filename": "customtabs/src/android/support/customtabs/trusted/LauncherActivity.java",
        "patchSetId": 2
      },
      "lineNbr": 90,
      "author": {
        "id": 1116074
      },
      "writtenOn": "2018-11-26T23:08:55Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "187f3e4b_ecde6dbb",
      "range": {
        "startLine": 90,
        "startChar": 42,
        "endLine": 90,
        "endChar": 60
      },
      "revId": "bbc320076eed760504875240bc1aea0be6b2dae8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "38b4bcdd_6d5ec2d6",
        "filename": "customtabs/src/android/support/customtabs/trusted/LauncherActivity.java",
        "patchSetId": 2
      },
      "lineNbr": 136,
      "author": {
        "id": 1116074
      },
      "writtenOn": "2018-11-26T19:34:17Z",
      "side": 1,
      "message": "It seems a bit scary to me that we are recommending developers to use a helper class that sets the session id to some hardcoded ID.\n\nThis is the first time I had a chance to see the newSession implementation with an integer session ID. This seems like quite a bit shift from the \"CustomTabsSession with Binder as ID\" concept and I am trying to wrap my head around the recommended flow here still. But I would say all clients using LauncherActivity launching as session with a hardcoded ID seems a bit problematic to begin with.",
      "range": {
        "startLine": 136,
        "startChar": 38,
        "endLine": 136,
        "endChar": 39
      },
      "revId": "bbc320076eed760504875240bc1aea0be6b2dae8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cc471b4b_f30b778b",
        "filename": "customtabs/src/android/support/customtabs/trusted/LauncherActivity.java",
        "patchSetId": 2
      },
      "lineNbr": 136,
      "author": {
        "id": 1149979
      },
      "writtenOn": "2018-11-26T19:44:59Z",
      "side": 1,
      "message": "When an id is provided, it is used to create a PendingIntent and this is used as the session key. This means that sessions from different apps can\u0027t collide.",
      "parentUuid": "38b4bcdd_6d5ec2d6",
      "range": {
        "startLine": 136,
        "startChar": 38,
        "endLine": 136,
        "endChar": 39
      },
      "revId": "bbc320076eed760504875240bc1aea0be6b2dae8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "aa9641f2_7e7ab449",
        "filename": "customtabs/src/android/support/customtabs/trusted/LauncherActivity.java",
        "patchSetId": 2
      },
      "lineNbr": 136,
      "author": {
        "id": 1116074
      },
      "writtenOn": "2018-11-26T20:44:52Z",
      "side": 1,
      "message": "To be a bit more clear, my comment was on API usage, more than the implementation is working or not.\n\nnewSession() with two params seems to be a public method we have added, so a natural question is which API usage is recommended? (with an int given or not). If this is the only publicly visible example of its usage, then it gets a bit more confusing imo. Is there a way to have the internal implementation details not leak into the API surface this much?\n\nWhat happens if we make the default implementation of newSession(null) assign a single constant value internally at all times for the session integer ID? (That way we are keeping the API with a designated ID for cases where you are using multiple sessions and want to distinguish between the two).",
      "parentUuid": "cc471b4b_f30b778b",
      "range": {
        "startLine": 136,
        "startChar": 38,
        "endLine": 136,
        "endChar": 39
      },
      "revId": "bbc320076eed760504875240bc1aea0be6b2dae8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1a5ce080_b7481e92",
        "filename": "customtabs/src/android/support/customtabs/trusted/LauncherActivity.java",
        "patchSetId": 2
      },
      "lineNbr": 136,
      "author": {
        "id": 1297953
      },
      "writtenOn": "2018-11-26T21:29:18Z",
      "side": 1,
      "message": "To me the current api makes sense: you use newSession with 2 args when you care about retaining sessions, and the one with 1 arg when you don\u0027t. In this case we care. I don\u0027t really see how this choice is an implementation detail. We might make the javadocs on newSession a bit more clear though.",
      "parentUuid": "aa9641f2_7e7ab449",
      "range": {
        "startLine": 136,
        "startChar": 38,
        "endLine": 136,
        "endChar": 39
      },
      "revId": "bbc320076eed760504875240bc1aea0be6b2dae8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "740de687_00d9a171",
        "filename": "customtabs/src/android/support/customtabs/trusted/LauncherActivity.java",
        "patchSetId": 2
      },
      "lineNbr": 136,
      "author": {
        "id": 1149979
      },
      "writtenOn": "2018-11-26T21:44:38Z",
      "side": 1,
      "message": "Ah gotcha, so the session resumption work was done by Anna (amalova@), there\u0027s a design doc here: https://docs.google.com/document/d/1xu2NZElKGiutlL_Lu9USS9TD6mjgBRKUGIHgU1m8Ne4/edit#heading\u003dh.2p59iqykq4fd\n\nThere\u0027s no recommendation of one #newSession method over the other - if the client wants to create a fire-and-forget session they use the single argument one and if they want a session they can reconnect to, they use the two argument one.\n\nI\u0027m not sure this is an implementation detail leaking into the design. The original behaviour is that newSession creates a new session each time its called and that is what most clients would want. Changing the default behaviour of newSession to using a constant session integer id would mess things up - multiple calls to newSession would all link to the same session.\n\nThis is a decent example of the API use - for the app, we have LauncherActivity.SESSION_ID for the main TWA session, if the developer wants to launch other CCT\u0027s or TWA\u0027s that don\u0027t get clobbered when a new browsable Intent comes in, they can use different ids/no ids.",
      "parentUuid": "aa9641f2_7e7ab449",
      "range": {
        "startLine": 136,
        "startChar": 38,
        "endLine": 136,
        "endChar": 39
      },
      "revId": "bbc320076eed760504875240bc1aea0be6b2dae8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2bca3ae5_273f7b28",
        "filename": "customtabs/src/android/support/customtabs/trusted/LauncherActivity.java",
        "patchSetId": 2
      },
      "lineNbr": 136,
      "author": {
        "id": 1116074
      },
      "writtenOn": "2018-11-26T23:08:55Z",
      "side": 1,
      "message": "OK. Since you are both convinced that this is a proper and clear usage of the API, no need for me to push back on this any further. I was mainly trying to channel what concerns  Android API Council  might have once we start upstreaming these changes. (Using the API like this, essentially locks in the faith of this implementation to the debates over the new API for newSession. If the API changes during upstreaming, what we recommend to devs may end up changing as well.)\n\nNo need to do anything around this here. But please take into consideration my worry that we are adding a lot of API changes and recommendations and betting on a bulk approval from a body that is not familiar with any of these yet AFAIK. (Assuming we want to release TWAs timed with a public support library release)",
      "parentUuid": "740de687_00d9a171",
      "range": {
        "startLine": 136,
        "startChar": 38,
        "endLine": 136,
        "endChar": 39
      },
      "revId": "bbc320076eed760504875240bc1aea0be6b2dae8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "eb2fd130_60dc084a",
        "filename": "customtabs/src/android/support/customtabs/trusted/LauncherActivity.java",
        "patchSetId": 2
      },
      "lineNbr": 180,
      "author": {
        "id": 1116074
      },
      "writtenOn": "2018-11-26T19:34:17Z",
      "side": 1,
      "message": "A less generic name maybe for devs who are not familiar with Custom Tabs specifics and various services in play here.",
      "range": {
        "startLine": 180,
        "startChar": 18,
        "endLine": 180,
        "endChar": 35
      },
      "revId": "bbc320076eed760504875240bc1aea0be6b2dae8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d82b85f4_0eaffa8a",
        "filename": "customtabs/src/android/support/customtabs/trusted/LauncherActivity.java",
        "patchSetId": 2
      },
      "lineNbr": 180,
      "author": {
        "id": 1297953
      },
      "writtenOn": "2018-11-26T21:29:18Z",
      "side": 1,
      "message": "Could you suggest one? It seems \"CustomTabsServiceConnection\" gives all the context, and there\u0027s no need to repeat the same in the name of the derived class.",
      "parentUuid": "eb2fd130_60dc084a",
      "range": {
        "startLine": 180,
        "startChar": 18,
        "endLine": 180,
        "endChar": 35
      },
      "revId": "bbc320076eed760504875240bc1aea0be6b2dae8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c95df6e3_4e07d14e",
        "filename": "customtabs/src/android/support/customtabs/trusted/LauncherActivity.java",
        "patchSetId": 2
      },
      "lineNbr": 180,
      "author": {
        "id": 1116074
      },
      "writtenOn": "2018-11-26T23:08:55Z",
      "side": 1,
      "message": "TWAClientToBrowserConnection? Mainly, I saw the ServiceConnection above and for a sec was trying to think through CustomTabsService vs TrustedWebActivityServiceConnection",
      "parentUuid": "d82b85f4_0eaffa8a",
      "range": {
        "startLine": 180,
        "startChar": 18,
        "endLine": 180,
        "endChar": 35
      },
      "revId": "bbc320076eed760504875240bc1aea0be6b2dae8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}